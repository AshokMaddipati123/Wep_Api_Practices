@using Login_And_Registration

@model UserViewModel


<p> Wellcome user</p>



@* 
@{
    ViewBag.Title = "User Details";
}

<style>
    /* Add your custom styles here */
    label {
        display: block;
        margin-bottom: 5px;
    }

    input,
    select,
    textarea {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        box-sizing: border-box;
    }

    button {
        background-color: #4caf50;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    #createTaskForm {
        display: none; /* Initially hide the form */
        margin-top: 20px;
    }

    #allTasks {
        margin-top: 20px;
    }

    .task-item {
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 4px;
    }
</style>

<script>
    function showCreateTaskForm() {
        var createTaskForm = document.getElementById("createTaskForm");
        createTaskForm.style.display = "block"; // Show the Create Task form

        var allTasksSection = document.getElementById("allTasks");
        allTasksSection.style.display = "none"; // Hide the All Tasks section
    }
</script>

<div>
    <button onclick="showCreateTaskForm()">Create Task</button>

    <div id="createTaskForm">
        <h2>Create Task</h2>
        <form  method="post" action="/User/SaveTask">
            <div>
                <label>User Story/Bug Number:</label>
                <input type="text" name="UserStoryBugNumber" required />
            </div>
            <div>
                <label>Project Name:</label>
                <select name="ProjectId">
                    @foreach (var project in ViewBag.Projects)
                    {
                        <option value="@project.ProjectId">@project.ProjectName</option>
                        //<option>@project.ProjectId</option>
                    }
                </select>
            </div>
            <div>
                <label>Task Description:</label>
                <textarea name="TaskDescription" required></textarea>
            </div>
            <div>
                <label>Time Slot (in minutes):</label>
                <input type="number" name="TimeSlot" required />
            </div>
            <div>
                <label>Date:</label>
                <input type="date" name="TaskDate" required />
            </div>
            <div>
                <label>Location:</label>
                <select name="LocationId">
                    @foreach (var location in ViewBag.Locations)
                    {
                        <option value="@location.LocationId">@location.LocationName</option>
                    }
                </select>
            </div>
            <button type="submit">Create Task</button>
        </form>
    </div>

     <h2>All Tasks</h2>
    <div id="allTasks">
        @foreach (var task in ViewBag.AllTasks ?? new List<TaskViewModel>())
        {
            <div class="task-item">
                <p>User Story/Bug Number: @task.UserStoryBugNumber</p>
                <p>Project: @task.ProjectName</p>
                <p>Description: @task.TaskDescription</p>
                <p>Time Slot: @task.TimeSlot minutes</p>
                <p>Date: @task.TaskDate</p>
                <p>Location: @task.LocationName</p>
            </div>
        }
    </div> 
</div> *@


@{
    ViewBag.Title = "User Details";
}

<style>
    
    label {
        display: block;
        margin-bottom: 5px;
    }

    input,
    select,
    textarea {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        box-sizing: border-box;
    }

    button {
        background-color: #4caf50;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    #createTaskForm {
        display: none; 
        margin-top: 20px;
    }
</style>

<script>
    function showCreateTaskForm() {
        var createTaskForm = document.getElementById("createTaskForm");
        createTaskForm.style.display = "block"; 

        var allTasksSection = document.getElementById("allTasks");
        allTasksSection.style.display = "none"; 
    }
</script>

<div>
    <button onclick="showCreateTaskForm()">Create Task</button>

    <div id="createTaskForm">
        <h2>Create Task</h2>
        <form method="post" action="/User/SaveTask">
            <div>
                <label>User Story/Bug Number:</label>
                <input type="text" name="UserStoryBugNumber" required />
            </div>
            <div>
                <label>Project Name:</label>
                <select name="ProjectId">
                    @foreach (var project in ViewBag.Projects)
                    {
                        <option value="@project.ProjectId">@project.ProjectName</option>
                    }
                </select>
            </div>
            <div>
                <label>Task Description:</label>
                <textarea name="TaskDescription" required></textarea>
            </div>
            <div>
                <label>Time Slot (in minutes):</label>
                <input type="number" name="TimeSlot" required />
            </div>
            <div>
                <label>Date:</label>
                <input type="date" name="TaskDate" required />
            </div>
            <div>
                <label>Location:</label>
                <select name="LocationId">
                    @foreach (var location in ViewBag.Locations)
                    {
                        <option value="@location.LocationId">@location.LocationName</option>
                    }
                </select>
            </div>
            <button type="submit">Create Task</button>
        </form>
    </div>
</div>

<!-- Add this at the appropriate location in UserDetails.cshtml -->
@if (!string.IsNullOrEmpty(ViewBag.SuccessMessage))
{
    <div class="alert alert-success">
        @ViewBag.SuccessMessage
    </div>
}